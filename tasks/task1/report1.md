# Отчёт по заданию 1

## 1. Общее словесное описание системы
Консольная игра «Три‑в‑ряд» работает на сетке 8×8, заполненной элементами пяти типов (A–E). Игрок делает ходы, меняя местами соседние элементы, чтобы образовывать линии из трёх и более одинаковых элементов. После образования совпадений элементы удаляются, начисляются очки, сверху «падают» новые элементы, заполняя пустоты, и процесс каскадов повторяется до стабилизации поля. Игра продолжается до тех пор, пока есть доступные ходы; при их отсутствии партия завершается с выводом статистики.

## 2. Ключевые сущности (потенциальные АТД)
Ниже перечислены основные сущности, их обязанности и границы ответственности.

1. Доска (Board)
   - Назначение: хранение и управление состоянием игрового поля 8×8.
   - Обязанности: доступ к ячейкам, безопасные чтение/запись, инициализация случайным набором элементов без стартовых совпадений (по возможности), применение операций перестановки, предоставление снимков состояния для отображения/отката (если понадобится).

2. Тип фишки (TileType)
   - Назначение: перечисление типов элементов (A–E) и, при расширении, типов бонусов.
   - Обязанности: единый источник истины для допустимых типов; используется генераторами, валидаторами, поиском рядов и подсчётом очков.

3. Фишка/Элемент (Tile)
   - Назначение: представление базового элемента поля с типом `TileType` и, при расширении, свойствами бонусов.
   - Обязанности: инкапсуляция типа/атрибутов, сравнение по типу, фабричные методы генерации нового элемента.

4. Валидатор хода (MoveValidator)
   - Назначение: проверка корректности и полезности попытки перестановки двух соседних позиций.
   - Обязанности: проверка соседства координат, симуляция или локальная эвристика образования совпадания, запрет «пустых» ходов, обработка границ поля и ошибок ввода.

5. Поисковик рядов (LineFinder)
   - Назначение: обнаружение всех рядов/столбцов из трёх и более одинаковых элементов (и преобразование в бонусы при больших комбинациях, если активированы).
   - Обязанности: поиск максимальных контуров рядов, агрегация результатов по группам, контракт: не изменяет поле, только вычисляет набор координат к удалению и специфику бонусов.


6. Cтатистика (ScoringAndStats)
   - Назначение: начисление очков за удалённые элементы/комбинации и ведение статистики партии.
   - Обязанности: расчёт очков (базовые и прогрессивные за 4+, T‑/L‑формы), учёт числа ходов, суммарных удалений, фиксация истории ключевых событий для итогового отчёта.

7. Игра (Game)
   - Назначение: объект конкретной партии с собственным состоянием (доска, счёт, история, настройки).
   - Обязанности: жизненный цикл одной игры, хранение и предоставление состояния для контроллера, сброс/перезапуск партии, итоги при завершении.

8. Контроллер игры и I/O (GameController)
   - Назначение: управление циклом игры, интеграция доменной логики и консольного ввода/вывода.
   - Обязанности: чтение команд пользователя (координаты перестановки), оркестрация шагов: валидация → перестановка → поиск рядов → удаление → начисление → гравитация/заполнение → повторный поиск до стабилизации → отображение; определение окончания партии при отсутствии ходов.



## 3. Системная идея «кто что делает» (кратко)
- Игрок вводит ход; `GameController` запрашивает `MoveValidator` для проверки.
- При корректном ходе `Board` меняет местами элементы; `LineFinder` находит ряды к удалению.
- Для найденных рядов `ScoringAndStats` начисляет очки; 
- `Game` хранит состояние партии; `GameController` выводит доску и проверяет наличие возможных ходов; при их отсутствии завершает партию и печатает статистику.
